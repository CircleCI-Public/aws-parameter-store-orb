description: >
  Fetch and load in your parameter store values as environment variables.
steps:
  - aws-cli/install
  - aws-cli/configure
  - run: | # Base64 encoding is used to keep multi-line strings in-tact while parsing.
        for row in $(aws ssm describe-parameters --no-paginate | jq -c '.Parameters[]'); do
          _jq() {
            echo ${row}
            # PARNAME=$(${row} | jq -r '.Name')
            # PARTYPE=$(${row} | jq -r '.Type')
            # # convert all data to strings
            # if [ $PARTYPE = "SecureString" ]
            # then
            #   echo "Decode the string"
            # elif [ $PARTYPE = "StringList" ]
            # then
            #   echo "Covert list to string"
            # else # Assume string
            #   PARDATA=$(aws ssm get-parameters --names ${PARNAME})
            # fi
            # echo ${PARNAME} ${PARDATA}
          }
          $(_jq)
        done
